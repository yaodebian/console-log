# Scenario Series

## 如果让你去设计一个大文件分片的上传功能，你会怎么设计，包括断点续传？

我会把大文件按固定大小切片，通过 File.slice() 得到 Blob 分片，然后在前端计算文件 MD5 作为唯一标识。
上传前基于 fileHash 去调用后端 Check 接口，获取已上传分片，若分片已完整，则标记完成，否则基于“已上传分片”进行断点续传。
未上传的分片使用并发请求上传，并加重试机制保证稳定性。
所有分片上传完成后调用 Merge 接口让服务端合并为完整文件。
这种方案既保证了大文件上传的可靠性，也能应对网络波动和页面刷新。

## 如果让你去设计一个定时器定时去执行某些任务，你会怎么去选型，去设计？

首先，定时器这块我不太熟悉，所以我主要讲讲思路。

选型方面，我会去调研是否存在相关的开源库：
- 若有，再进行比对，选择生态、性能、稳定性较优的，并直接拿来用。
- 若无，我会考虑自己实现一个，不过优先会基于 vibe coding 来实现。
另外，定时器的时间以及定时的任务，我会做成可配置的，方便后续根据业务场景调整。


